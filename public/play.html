<!DOCTYPE html>
<html lang="en">


	<head>
		<meta charset = "utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Trivia-Game Play</title>
		<!-- Compiled and minified CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
		<link rel="stylesheet" href="./css/style.css">
		<script src="https://code.jquery.com/jquery.js"></script>
	</head>

	<body>
		<div class = "container">
				<div class="home-header">
						<h1 class="header center">Let's Go!</h1>
						<div class = "center-align">
						<a class = "waves-effect waves-light btn" id = "startGame">Start!</a>
						</div>
				</div>
			<div id = "question-view">
					<h3>Question</h3>
			</div>
			<hr>
				
			<div id = "answer-view">
					<h3>Answer Choices</h3>
					<a class = "waves-effect waves-light btn" id = "answer-choice-1"></a>
					<br>
					<br>
					<a class = "waves-effect waves-light btn" id = "answer-choice-2"></a>
					<br>
					<br>
					<a class = "waves-effect waves-light btn" id = "answer-choice-3"></a>
					<br>
					<br>
					<a class = "waves-effect waves-light btn" id = "answer-choice-4"></a>
			</div>
			<div id = "timer-view">
			<h4>Timer</h4>
			</div>
		</div>
  
	</body>

<script type = "text/javascript">

	$("#startGame").on("click", function() {
		$(this).hide(1000);
		game.loadQuestion();
});

	$(document).on("click", ".answer-btn", function(e) {
		game.click(e)
		console.log("button clicked");
})

	$(document).on("click", ".reset", function() {
		game.reset();
})

var game = {
	questions:questions,
	currentQuest:0,
	counter:20,
	correctAnswer:0,
	incorrectAnswer:0,
	unanswered:0,

	countdownTime: function() {
		game.counter--;
		$("#time").html(game.counter + " seconds left");
		if (game.counter <= 0) {
			game.timesUp();
		}
	},

	loadQuestion: function() {
		timer = setInterval(game.countdownTime, 1000);
		$("#result").empty();
		$("#question-view").html(questions[game.currentQuest].question);
		for (var i = 0; i < questions[game.currentQuest].answers.length;
			i++) {
				var a = $("<button>");
				a.addClass("answer-btn btn-primary");
				a.attr("data-name", questions[game.currentQuest].
					answers[i]);
				a.text(questions[game.currentQuest].answers[i]);
				$("#answer-view").append(a);


		}	
	},

	nextQuestion: function() {
		game.counter = 20;
		$("#time").html(game.counter + " seconds left");
		game.currentQuest++;
		game.loadQuestion();
	},

	results: function () {
		clearInterval(timer);
		$("#result1").html("Game Over");
		$("#result2").html("Correct Answers: " +game.correctAnswer);
		$("#result3").html("Incorrect Answers: " +game.incorrectAnswer);
		$("#result4").html("Unanswered: " +game.unanswered);
		$("#result5").html("<button class='reset btn-primary'>Play Again</button>");
	},


	correct: function() {
		console.log("yep");
		clearInterval(timer);
		game.correctAnswer++;
		$("#result").html("You are correct!");
		if (game.currentQuest==questions.length-1) {
			setTimeout(game.results, 3000);
		} else {
			setTimeout(game.nextQuestion, 3000);
		}
		$("#buttons-view").empty();
	},

	incorrect: function() {
		console.log("nope");
		clearInterval(timer);
		game.incorrectAnswer++;
		$("#result").html("Wrong! The correct answer is " +questions[
			game.currentQuest].correctAnswer);
		if (game.currentQuest==questions.length-1) {
			setTimeout(game.results, 3000);
		} else {
			setTimeout(game.nextQuestion, 3000);
		}
		$("#buttons-view").empty();
	},

	timesUp: function() {
		clearInterval(timer);
		$("#time").html("Time has run out. ");
		game.unanswered++;
		$("#result").html("The correct answer is " +questions[game.
			currentQuest].correctAnswer);
		if (game.currentQuest==questions.length-1){
			setTimeout(game.results, 3000);
		} else {
			setTimeout(game.nextQuestion, 3000);
		}
		$("#buttons-view").empty();
	},

	reset: function() {
		game.currentQuest = 0;
		game.counter = 20;
		game.correct = 0;
		game.incorrect = 0;
		game.unanswered = 0;
		$("#buttons-view").empty();
		$("#result").empty();
		$("#result1").empty();
		$("#result2").empty();
		$("#result3").empty();
		$("#result4").empty();
		$("#result5").empty();
		game.loadQuestion();
	},

	click: function(e) {
		clearInterval(timer);
		if ($(e.target).data("name")==questions[game.currentQuest].
			correctAnswer) {
			game.correct();
		
		} else {
			game.incorrect();
	}

		}
	}
</script>

</html>